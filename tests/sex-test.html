<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç: –ö–∞–∫ —Å–∫–æ—Ä–æ —É –º–µ–Ω—è –±—É–¥–µ—Ç s*x? - BPD_tests</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@700;900&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: #0a0a0a;
        color: #ffffff;
        overflow-x: hidden;
      }

      .display-font {
        font-family: "Playfair Display", serif;
      }

      .dynamic-bg {
        position: fixed;
        inset: 0;
        background: #0a0a0a;
        overflow: hidden;
      }

      .dynamic-bg::before {
        content: "";
        position: absolute;
        width: 150%;
        height: 150%;
        top: -25%;
        left: -25%;
        background: radial-gradient(
            circle at 25% 25%,
            rgba(239, 68, 68, 0.1) 0%,
            transparent 40%
          ),
          radial-gradient(
            circle at 75% 75%,
            rgba(249, 115, 22, 0.1) 0%,
            transparent 40%
          ),
          radial-gradient(
            circle at 50% 50%,
            rgba(236, 72, 153, 0.05) 0%,
            transparent 60%
          );
      }

      .glass-panel {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(25px) saturate(150%);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
      }

      a,
      .transition-colors {
        transition: color 0.4s ease;
      }

      .transition-transform {
        transition: transform 0.4s ease;
      }

      .option-card,
      .btn-premium {
        will-change: transform, background, border-color;
      }

      .option-card {
        background: rgba(255, 255, 255, 0.03);
        border: 2px solid rgba(255, 255, 255, 0.1);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .option-card:hover {
        background: rgba(255, 255, 255, 0.05);
        border-color: rgba(249, 115, 22, 0.5);
        transform: translateY(-2px);
      }

      .option-card.selected {
        background: linear-gradient(
          135deg,
          rgba(239, 68, 68, 0.2),
          rgba(249, 115, 22, 0.2)
        );
        border-color: rgba(239, 68, 68, 0.6);
      }

      input[type="radio"] {
        display: none;
      }

      .btn-premium {
        position: relative;
        background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);
        color: white;
        padding: 20px 60px;
        border-radius: 16px;
        font-weight: 700;
        font-size: 18px;
        transition: all 0.4s ease;
        box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
      }

      .btn-premium:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 30px rgba(249, 115, 22, 0.4);
      }

      .progress-container {
        position: sticky;
        top: 80px;
        z-index: 40;
        padding: 1rem 0;
        background: rgba(10, 10, 10, 0.7);
        backdrop-filter: blur(8px);
        margin-bottom: 2rem;
        border-radius: 1rem;
      }

      .progress-bar {
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        overflow: hidden;
        width: 90%;
        margin: 0 auto;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #ef4444, #f97316);
        border-radius: 3px;
        transition: width 0.5s ease;
      }

      .gradient-text {
        background: linear-gradient(
          135deg,
          #ef4444 0%,
          #f97316 50%,
          #eab308 100%
        );
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 200% 200%;
        animation: gradient-shift 3s ease infinite;
      }

      @keyframes gradient-shift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease-out;
      }

      .fade-out {
        animation: fadeOut 0.5s ease-in forwards;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(-20px);
          visibility: hidden;
        }
      }

      .passion-meter-bg {
        width: 80px;
        height: 300px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 20px;
        padding: 10px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .passion-meter-bar {
        width: 100%;
        height: 100%;
        border-radius: 15px;
        background: linear-gradient(to top, #f97316, #ef4444, #eab308);
        transform-origin: bottom;
        transform: scaleY(0);
        transition: transform 1.2s cubic-bezier(0.19, 1, 0.22, 1);
      }

      .fireworks-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .particle {
        position: absolute;
        width: 5px;
        height: 5px;
        border-radius: 50%;
        background-color: var(--color);
        animation: explode 1s ease-out forwards;
      }

      @keyframes explode {
        from {
          transform: translate(0, 0) scale(1);
          opacity: 1;
        }
        to {
          transform: var(--transform);
          opacity: 0;
        }
      }

      /* --- Mobile Optimizations --- */
      @media (max-width: 768px) {
        .glass-panel,
        .progress-container {
          backdrop-filter: none;
          background: rgba(20, 20, 22, 0.85);
          border-color: rgba(255, 255, 255, 0.15);
        }
        .dynamic-bg {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="dynamic-bg"></div>

    <div class="relative z-10 min-h-screen flex flex-col">
      <!-- Navigation -->
      <nav class="glass-panel fixed top-0 w-full z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
          <a href="../../index.html" class="flex items-center space-x-2 group">
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-red-500 to-orange-500 flex items-center justify-center group-hover:scale-110 transition-transform"
            >
              <span class="text-white font-bold text-xl">Œ®</span>
            </div>
            <span class="text-xl font-semibold">BPD_tests</span>
          </a>
          <div class="flex items-center space-x-6">
            <a href="../../index.html" class="hover:text-purple-400"
              >‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ç–µ—Å—Ç–∞–º</a
            >
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <div
        class="container mx-auto max-w-5xl px-4 sm:px-6 md:px-8 pt-24 pb-20 flex-grow"
      >
        <!-- Test Header -->
        <header class="text-center mb-12 fade-in" style="margin-top: 80px">
          <h1
            class="display-font text-5xl sm:text-6xl md:text-7xl font-bold mb-4"
          >
            –¢–µ—Å—Ç: <span class="gradient-text">–ö–∞–∫ —Å–∫–æ—Ä–æ —É –º–µ–Ω—è –±—É–¥–µ—Ç s*x?</span>
          </h1>
        </header>

        <!-- Test Container -->
        <main id="test-container" class="fade-in">
          <!-- Progress Bar Container -->
          <div class="progress-container" id="progress-container">
            <div class="progress-bar" id="progress-bar">
              <div
                class="progress-fill"
                id="progress-fill"
                style="width: 0%"
              ></div>
            </div>
          </div>

          <form
            id="sex-test-form"
            class="glass-panel rounded-3xl p-8 md:p-12 shadow-2xl space-y-10"
          ></form>

          <div class="mt-16 text-center">
            <button type="submit" form="sex-test-form" class="btn-premium">
              <span class="relative z-10">–£–∑–Ω–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥–Ω–æ–∑ üîÆ</span>
            </button>
          </div>
        </main>

        <!-- Results Container -->
        <div id="results-container" class="hidden mt-16">
          <div
            class="glass-panel rounded-3xl p-8 md:p-12 shadow-2xl relative overflow-hidden"
          >
            <div id="fireworks-container" class="fireworks-container"></div>
            <div
              class="flex flex-col md:flex-row items-center justify-center gap-12 relative z-10"
            >
              <!-- Passion Meter -->
              <div class="flex flex-col items-center">
                <h3 class="font-bold text-xl mb-4">–ò–∑–º–µ—Ä–∏—Ç–µ–ª—å –°—Ç—Ä–∞—Å—Ç–∏</h3>
                <div id="passion-meter-container" class="relative">
                  <div class="passion-meter-bg">
                    <div id="passion-meter-bar" class="passion-meter-bar"></div>
                  </div>
                </div>
              </div>
              <!-- Result Text -->
              <div class="flex-1 text-center md:text-left">
                <h2
                  class="display-font text-4xl md:text-5xl font-bold mb-4"
                  id="result-title"
                ></h2>
                <p
                  id="result-description"
                  class="text-gray-300 text-lg leading-relaxed max-w-2xl"
                ></p>
              </div>
            </div>
          </div>

          <div class="mt-12 text-center space-y-4">
            <button onclick="location.reload()" class="btn-premium">
              –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
            </button>
            <div>
              <a
                href="../../index.html"
                class="text-purple-400 hover:text-purple-300"
              >
                –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —Ç–µ—Å—Ç–æ–≤ ‚Üí
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer class="glass-panel mt-auto py-8 px-6">
        <div class="max-w-7xl mx-auto">
          <div class="flex flex-col md:flex-row justify-between items-center">
            <div class="text-center md:text-left mb-4 md:mb-0">
              <p class="text-gray-400">¬© 2024 BPD_tests. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
    <script>
      const questions = [
        {
          q: "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é, –∫–∞–∫ —á–∞—Å—Ç–æ —Ç—ã –ª–æ–≤–∏–ª(–∞) —Å–µ–±—è –Ω–∞ —Ç–æ–º, —á—Ç–æ –º—ã—Å–ª–µ–Ω–Ω–æ —Ä–∞–∑–¥–µ–≤–∞–µ—à—å –∫–æ–≥–æ-—Ç–æ?",
          a: "frequency",
        },
        {
          q: "–°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞ 7 –¥–Ω–µ–π —Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è–ª(–∞) –¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –º–µ–º—ã/—Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä—è—è —Ä–µ–∞–∫—Ü–∏—é?",
          a: "quantity_high",
        },
        {
          q: "–û—Ü–µ–Ω–∏ —Å–≤–æ–π —É—Ä–æ–≤–µ–Ω—å –∂–µ–ª–∞–Ω–∏—è –ø–æ 5-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é.",
          a: "intensity",
        },
        {
          q: "–¢–≤–æ–∏ —Å—Ç–æ—Ä–∏—Å –∑–∞ –Ω–µ–¥–µ–ª—é: —ç—Å—Ç–µ—Ç–∏–∫–∞ –∏ –∫–æ—Ç–∏–∫–∏ –∏–ª–∏ '—Å–ª—É—á–∞–π–Ω—ã–µ' —Ä–∞–∫—É—Ä—Å—ã, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞—é—â–∏–µ —Ñ–∏–≥—É—Ä—É?",
          a: "choice_seductive",
        },
        {
          q: "–ù–∞–¥–µ–≤–∞–ª(–∞) –ª–∏ —Ç—ã '—Ç—É —Å–∞–º—É—é' –æ–¥–µ–∂–¥—É/–±–µ–ª—å–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫, –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è?",
          a: "frequency_reversed",
        },
        {
          q: "–¢–≤–æ–π –ø–ª–µ–π–ª–∏—Å—Ç –¥–ª—è –¥—É—à–∞: –≥—Ä—É—Å—Ç–Ω—ã–µ –±–∞–ª–ª–∞–¥—ã –∏–ª–∏ —á—Ç–æ-—Ç–æ, –ø–æ–¥ —á—Ç–æ —Ö–æ—á–µ—Ç—Å—è –∑–∞–∂–∏–≥–∞—Ç—å?",
          a: "choice_dirty",
        },
        {
          q: "–°–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Ç—ã '—Å–ª—É—á–∞–π–Ω–æ' –∫–∞—Å–∞–ª—Å—è(–∞—Å—å) –∫–æ–≥–æ-—Ç–æ, —á—Ç–æ–±—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –∏—Å–∫—Ä—É?",
          a: "quantity_high",
        },
        { q: "–¢–≤–æ—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ '—Å–∫—É—á–∞—é' –≤ —á–∞—Å –Ω–æ—á–∏?", a: "reaction_hot" },
        {
          q: "–ù–∞—Å–∫–æ–ª—å–∫–æ —Ç–≤–æ–µ –∂–∏–ª—å–µ –≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–µ–º—É –≥–æ—Å—Ç—è(–∏) –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?",
          a: "readiness",
        },
        {
          q: "–°–∫–æ–ª—å–∫–æ –±–æ–∫–∞–ª–æ–≤ *—á–µ–≥–æ-—Ç–æ* —Ç–µ–±–µ –Ω—É–∂–Ω–æ –¥–ª—è —Ö—Ä–∞–±—Ä–æ—Å—Ç–∏, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–π —à–∞–≥?",
          a: "quantity_low_reversed",
        },
        {
          q: "–û–±—Å—É–∂–¥–µ–Ω–∏—è —Å –¥—Ä—É–∑—å—è–º–∏ —á–∞—â–µ –∫–∞—Å–∞—é—Ç—Å—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ —Ç–µ–±–µ —á–µ–ª–æ–≤–µ–∫–∞ –∏–ª–∏ —Ä–∞–±–æ—á–∏—Ö/—É—á–µ–±–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤?",
          a: "choice_person",
        },
        {
          q: "–ù–∞—Å–∫–æ–ª—å–∫–æ —Ç—ã —É–≤–µ—Ä–µ–Ω(–∞), —á—Ç–æ —Å–º–æ–∂–µ—à—å –¥–æ—Å—Ç–∞–≤–∏—Ç—å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä—É?",
          a: "confidence",
        },
        {
          q: "–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —Ç—ã –¥—É–º–∞–ª(–∞) –æ –ø–æ–∫—É–ø–∫–µ —Å—Ä–µ–¥—Å—Ç–≤ –∫–æ–Ω—Ç—Ä–∞—Ü–µ–ø—Ü–∏–∏, –±—ã–ª...",
          a: "time_ago",
        },
        {
          q: "–¢–≤–æ–π –≤–∑–≥–ª—è–¥ –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏: –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏–ª–∏ —Ç—ã —É–∂–µ –∑–Ω–∞–µ—à—å, –∫–∞–∫ —ç—Ç–æ—Ç —á–µ–ª–æ–≤–µ–∫ –≤—ã–≥–ª—è–¥–∏—Ç –±–µ–∑ –æ–¥–µ–∂–¥—ã?",
          a: "choice_look",
        },
        {
          q: "–ï—Å–ª–∏ –±—ã —Å–µ–∫—Å –±—ã–ª –≤–∞–ª—é—Ç–æ–π, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç—ã –±–æ–≥–∞—Ç(–∞) –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?",
          a: "richness",
        },
      ];

      const answerOptions = {
        frequency: [
          { text: "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ", points: 2 },
          { text: "–ß–∞—Å—Ç–æ", points: 1 },
          { text: "–ò–Ω–æ–≥–¥–∞", points: 0 },
          { text: "–†–µ–¥–∫–æ", points: -1 },
          { text: "–ù–∏ —Ä–∞–∑—É", points: -2 },
        ],
        frequency_reversed: [
          { text: "–î–∞, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å", points: 2 },
          { text: "–ü–∞—Ä—É —Ä–∞–∑", points: 1 },
          { text: "–ë—ã–ª –æ–¥–∏–Ω —Ä–∞–∑", points: 0 },
          { text: "–ù–µ—Ç, —Ç–æ–ª—å–∫–æ –ø–æ –ø–æ–≤–æ–¥—É", points: -1 },
          { text: "–£ –º–µ–Ω—è –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ", points: -2 },
        ],
        quantity_high: [
          { text: "–ë–æ–ª—å—à–µ 5", points: 2 },
          { text: "3-4", points: 1 },
          { text: "1-2", points: 0 },
          { text: "–ù–∏ –æ–¥–Ω–æ–≥–æ", points: -1 },
          { text: "–Ø –≤ —Ä–µ–∂–∏–º–µ –æ—Ñ–ª–∞–π–Ω", points: -2 },
        ],
        quantity_low_reversed: [
          { text: "–ù–∏ –æ–¥–Ω–æ–≥–æ, —è —Å–∞–º–∞(–∞) —Å–º–µ–ª–æ—Å—Ç—å", points: 2 },
          { text: "–û–¥–∏–Ω, –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è", points: 1 },
          { text: "–ü–∞—Ä—É, –¥–ª—è –∫—É—Ä–∞–∂–∞", points: 0 },
          { text: "3-4, –±–µ–∑ —ç—Ç–æ–≥–æ –Ω–∏–∫–∞–∫", points: -1 },
          { text: "–ë–æ–ª—å—à–µ 5, —è –≤ —Ç–∞–Ω–∫–µ", points: -2 },
        ],
        intensity: [
          { text: "5/5, —è –≤—É–ª–∫–∞–Ω", points: 2 },
          { text: "4/5, –∏—Å–∫—Ä–∏—Ç", points: 1 },
          { text: "3/5, –≤ –Ω–æ—Ä–º–µ", points: 0 },
          { text: "2/5, —Å–ø—è—â–∏–π —Ä–µ–∂–∏–º", points: -1 },
          { text: "1/5, –ª–µ–¥–Ω–∏–∫–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥", points: -2 },
        ],
        choice_dirty: [
          { text: "–ß—Ç–æ-—Ç–æ, –ø–æ–¥ —á—Ç–æ —Ö–æ—á–µ—Ç—Å—è –∑–∞–∂–∏–≥–∞—Ç—å", points: 2 },
          { text: "–ü—Ä–∏–º–µ—Ä–Ω–æ –ø–æ—Ä–æ–≤–Ω—É", points: 1 },
          { text: "–ì—Ä—É—Å—Ç–Ω—ã–µ –±–∞–ª–ª–∞–¥—ã", points: -1 },
          { text: "–õ–µ–∫—Ü–∏–∏ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏", points: -2 },
        ],
        choice_seductive: [
          { text: "'–°–ª—É—á–∞–π–Ω—ã–µ' —Ä–∞–∫—É—Ä—Å—ã", points: 2 },
          { text: "–ü—Ä–∏–º–µ—Ä–Ω–æ –ø–æ—Ä–æ–≤–Ω—É", points: 1 },
          { text: "–≠—Å—Ç–µ—Ç–∏–∫–∞ –∏ –∫–æ—Ç–∏–∫–∏", points: -1 },
          { text: "–¢–æ–ª—å–∫–æ –º–µ–º—ã", points: -2 },
        ],
        reaction_hot: [
          { text: "–°—Ä—ã–≤–∞—é—Å—å –∏ –µ–¥—É", points: 2 },
          { text: "–°–ø—Ä–∞—à–∏–≤–∞—é '—á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?'", points: 1 },
          { text: "–û—Ç–≤–µ—á–∞—é '–∏ —è'", points: 0 },
          { text: "–ò–≥–Ω–æ—Ä–∏—Ä—É—é –¥–æ —É—Ç—Ä–∞", points: -1 },
          { text: "–ë–ª–æ–∫–∏—Ä—É—é", points: -2 },
        ],
        readiness: [
          { text: "100%, —Ö–æ—Ç—å —Å–µ–π—á–∞—Å", points: 2 },
          { text: "–ù—É–∂–Ω–æ 15 –º–∏–Ω—É—Ç –Ω–∞ —Å–±–æ—Ä—ã", points: 1 },
          { text: "–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω(–∞) –Ω–µ –±—É–¥–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ —É–≥–ª–∞–º", points: 0 },
          { text: "–ù–µ—Ç, —Ç–∞–º —Ö–∞–æ—Å", points: -1 },
          { text: "–ú–Ω–µ –Ω–µ–∫—É–¥–∞ –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å", points: -2 },
        ],
        choice_person: [
          { text: "–≠—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ–Ω–µ—á–Ω–æ", points: 2 },
          { text: "–ü—Ä–∏–º–µ—Ä–Ω–æ 50/50", points: 1 },
          { text: "–†–∞–±–æ—Ç—É/—É—á–µ–±—É", points: -1 },
          { text: "–ü–æ–ª–∏—Ç–∏–∫—É", points: -2 },
        ],
        confidence: [
          { text: "–ù–∞ 100%, —è —ç–∫—Å–ø–µ—Ä—Ç", points: 2 },
          { text: "–£–≤–µ—Ä–µ–Ω(–∞) –Ω–∞ 80%", points: 1 },
          { text: "50/50, –∫–∞–∫ –ø–æ–π–¥–µ—Ç", points: 0 },
          { text: "–ù–µ–º–Ω–æ–≥–æ —Å–æ–º–Ω–µ–≤–∞—é—Å—å", points: -1 },
          { text: "–ü–æ–Ω—è—Ç–∏—è –Ω–µ –∏–º–µ—é", points: -2 },
        ],
        time_ago: [
          { text: "–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ", points: 2 },
          { text: "–í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ", points: 1 },
          { text: "–ü–∞—Ä—É –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥", points: 0 },
          { text: "–ë–æ–ª—å—à–µ –≥–æ–¥–∞ –Ω–∞–∑–∞–¥", points: -1 },
          { text: "–ù–µ –ø–æ–º–Ω—é/–Ω–∏–∫–æ–≥–¥–∞", points: -2 },
        ],
        choice_look: [
          { text: "–ó–Ω–∞—é, –∫–∞–∫ –±–µ–∑ –æ–¥–µ–∂–¥—ã", points: 2 },
          { text: "–°–º–µ—Å—å —Ç–æ–≥–æ –∏ –¥—Ä—É–≥–æ–≥–æ", points: 1 },
          { text: "–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π", points: 0 },
          { text: "–°—Ç–∞—Ä–∞—é—Å—å –Ω–µ —Å–º–æ—Ç—Ä–µ—Ç—å", points: -1 },
        ],
        richness: [
          { text: "–ú–∏–ª–ª–∏–æ–Ω–µ—Ä(—à–∞)", points: 2 },
          { text: "–û–±–µ—Å–ø–µ—á–µ–Ω–Ω—ã–π(–∞—è)", points: 1 },
          { text: "–°—Ä–µ–¥–Ω–∏–π –∫–ª–∞—Å—Å", points: 0 },
          { text: "–ù–∞ –º–µ–ª–∏", points: -1 },
          { text: "–ë–∞–Ω–∫—Ä–æ—Ç", points: -2 },
        ],
      };

      const testContainer = document.getElementById("test-container");
      const resultsContainer = document.getElementById("results-container");
      const form = document.getElementById("sex-test-form");
      // --- –ù–û–í–û–ï: –ö–ª—é—á –¥–ª—è localStorage ---
      const storageKey = "sexTestAnswers";

      let answeredQuestions = 0;

      // --- Lenis Smooth Scroll Initialization ---
      const lenis = new Lenis({
        lerp: 0.07,
        smoothWheel: true,
      });

      function raf(time) {
        lenis.raf(time);
        requestAnimationFrame(raf);
      }
      requestAnimationFrame(raf);

      // --- –ù–û–í–û–ï: –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è ---
      function saveState() {
        const formData = new FormData(form);
        const answers = {};
        for (const [name, value] of formData.entries()) {
          answers[name] = value;
        }
        localStorage.setItem(storageKey, JSON.stringify(answers));
      }

      // --- –ù–û–í–û–ï: –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è ---
      function loadState() {
        const savedAnswers = localStorage.getItem(storageKey);
        if (savedAnswers) {
          const answers = JSON.parse(savedAnswers);
          Object.entries(answers).forEach(([name, value]) => {
            const radio = form.querySelector(
              `input[name="${name}"][value="${value}"]`
            );
            if (radio) {
              radio.checked = true;
              const container = radio.closest(".grid");
              container
                .querySelectorAll(".option-card")
                .forEach((card) => card.classList.remove("selected"));
              radio.parentElement.classList.add("selected");

              const questionBlock = radio.closest(".question-block");
              if (!questionBlock.hasAttribute("data-answered")) {
                questionBlock.setAttribute("data-answered", "true");
                answeredQuestions++;
              }
            }
          });
          updateProgress();
        }
      }

      function startTest() {
        testContainer.classList.add("fade-in");
        renderQuestions();
        // --- –ù–û–í–û–ï: –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ ---
        loadState();
      }

      function updateProgress() {
        const progress = (answeredQuestions / questions.length) * 100;
        document.getElementById("progress-fill").style.width = progress + "%";
      }

      function renderQuestions() {
        form.innerHTML = "";
        questions.forEach((qData, index) => {
          const block = document.createElement("div");
          block.className = "question-block fade-in";
          block.style.animationDelay = `${index * 0.05}s`;

          const questionText = document.createElement("p");
          questionText.className = "font-medium text-lg text-gray-100 mb-4";
          questionText.textContent = `${index + 1}. ${qData.q}`;
          block.appendChild(questionText);

          const optionsContainer = document.createElement("div");
          optionsContainer.className =
            "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3";

          const currentAnswerSet = answerOptions[qData.a];

          currentAnswerSet.forEach((opt) => {
            const label = document.createElement("label");
            label.className =
              "option-card p-4 rounded-xl text-center cursor-pointer flex items-center justify-center min-h-[60px]";
            const radio = document.createElement("input");
            radio.type = "radio";
            radio.name = `q${index}`;
            radio.value = opt.points;
            radio.required = true;
            label.appendChild(radio);
            label.append(opt.text);
            optionsContainer.appendChild(label);
          });

          block.appendChild(optionsContainer);
          form.appendChild(block);
        });
      }

      form.addEventListener("change", (e) => {
        if (e.target.type === "radio") {
          const container = e.target.closest(".grid");
          container
            .querySelectorAll(".option-card")
            .forEach((card) => card.classList.remove("selected"));
          e.target.parentElement.classList.add("selected");

          const questionBlock = e.target.closest(".question-block");
          if (!questionBlock.hasAttribute("data-answered")) {
            questionBlock.setAttribute("data-answered", "true");
            answeredQuestions++;
            updateProgress();
          }
          // --- –ù–û–í–û–ï: –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ---
          saveState();
        }
      });

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        if (answeredQuestions < questions.length) {
          const unansweredBlock = form.querySelector(
            ".question-block:not([data-answered])"
          );
          if (unansweredBlock) {
            lenis.scrollTo(unansweredBlock, { offset: -150 });
          }
          return;
        }
        const score = calculateScore();
        renderResults(score);
        // --- –ù–û–í–û–ï: –û—á–∏—â–∞–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ ---
        localStorage.removeItem(storageKey);
      });

      function calculateScore() {
        const formData = new FormData(form);
        let totalScore = 0;
        for (let i = 0; i < questions.length; i++) {
          const value = formData.get(`q${i}`);
          if (value !== null) {
            totalScore += parseInt(value, 10);
          }
        }
        return totalScore;
      }

      function renderResults(score) {
        testContainer.classList.add("fade-out");
        testContainer.addEventListener(
          "animationend",
          () => {
            testContainer.classList.add("hidden");
            resultsContainer.classList.remove("hidden");
            resultsContainer.classList.add("fade-in");
            lenis.scrollTo(0);
          },
          { once: true }
        );

        const titleEl = document.getElementById("result-title");
        const descriptionEl = document.getElementById("result-description");
        const meterBar = document.getElementById("passion-meter-bar");
        const fireworksContainer = document.getElementById(
          "fireworks-container"
        );

        let resultData;
        let scorePercentage = Math.max(
          0,
          Math.min(100, ((score + 30) / 50) * 100)
        );

        if (score > 18) {
          resultData = {
            title: "–°–ï–ì–û–î–ù–Ø –ò–õ–ò –ó–ê–í–¢–†–ê! (1-2 –¥–Ω—è) üî•üåã",
            description:
              "–¢–≤–æ—è —Å–µ–∫—Å—É–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è —Å–µ–π—á–∞—Å —Å–ø–æ—Å–æ–±–Ω–∞ —Ä–∞—Å–ø–ª–∞–≤–∏—Ç—å –ª–µ–¥–Ω–∏–∫–∏. –ì–æ—Ç–æ–≤—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –±–ª–∏–∂–∞–π—à–∏–µ 48 —á–∞—Å–æ–≤ –±—É–¥—É—Ç –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–º–∏. –ó–≤–µ–∑–¥—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–ª–∞–≥–æ—Å–∫–ª–æ–Ω–Ω—ã, –æ–Ω–∏ —É–∂–µ –∑–∞–∫–∞–∑–∞–ª–∏ –≤–∞–º –Ω–æ–º–µ—Ä –≤ –æ—Ç–µ–ª–µ. –ù–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è–π—Å—è –Ω–µ–∏–∑–±–µ–∂–Ω–æ–º—É! –ò –ø–æ–º–Ω–∏, —Å –≥–æ—Ä—è—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –Ω–∞–ø–∏—Ç–∫–∞–º–∏ –Ω—É–∂–Ω–æ –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ ;)",
          };
        } else if (score > 8) {
          resultData = {
            title: "–ù–ê –≠–¢–û–ô –ù–ï–î–ï–õ–ï! (3-7 –¥–Ω–µ–π) ‚ö°Ô∏è",
            description:
              "–¢—ã –≤ –æ–¥–Ω–æ–º —à–∞–≥–µ –æ—Ç —Ü–µ–ª–∏. –í–æ–∑–¥—É—Ö –Ω–∞—ç–ª–µ–∫—Ç—Ä–∏–∑–æ–≤–∞–Ω, –∏ –∫—Ç–æ-—Ç–æ —É–∂–µ —Ç–æ—á–Ω–æ –¥—É–º–∞–µ—Ç –æ —Ç–µ–±–µ –ø–µ—Ä–µ–¥ —Å–Ω–æ–º. –°–¥–µ–ª–∞–π –æ–¥–∏–Ω —Å–º–µ–ª—ã–π —à–∞–≥ ‚Äî –æ—Ç–ø—Ä–∞–≤—å —Ç–æ —Å–∞–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ —É–ª—ã–±–Ω–∏—Å—å –≤ –æ—Ç–≤–µ—Ç. –≠—Ç–∞ –Ω–µ–¥–µ–ª—è –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —Ä–µ—à–∞—é—â–µ–π. –ù–µ–º–Ω–æ–≥–æ –∞***–≥–æ–ª—è –¥–ª—è —Ö—Ä–∞–±—Ä–æ—Å—Ç–∏ –Ω–µ –ø–æ–≤—Ä–µ–¥–∏—Ç.",
          };
        } else if (score > -5) {
          resultData = {
            title: "–í –¢–ï–ß–ï–ù–ò–ï –ú–ï–°–Ø–¶–ê! (8-30 –¥–Ω–µ–π) üòè",
            description:
              "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –µ—Å—Ç—å, –Ω–æ –æ–≥–æ–Ω—å –Ω—É–∂–Ω–æ —Ä–∞–∑–¥—É—Ç—å. –•–≤–∞—Ç–∏—Ç —Å–∏–¥–µ—Ç—å –≤ —Ç–µ–Ω–∏! –¢–≤–æ—è —Ö–∞—Ä–∏–∑–º–∞ –∂–¥–µ—Ç, —á—Ç–æ–±—ã –µ–µ –≤—ã–ø—É—Å—Ç–∏–ª–∏ –Ω–∞ –≤–æ–ª—é. –ó–∞–ø–ª–∞–Ω–∏—Ä—É–π –≤—ã—Ö–æ–¥ –≤ —Å–≤–µ—Ç, –Ω–∞–¥–µ–Ω—å —Å–≤–æ–π –ª—É—á—à–∏–π –Ω–∞—Ä—è–¥. –í—Å–µ–ª–µ–Ω–Ω–∞—è –∂–¥–µ—Ç —Ç–≤–æ–µ–≥–æ —Ö–æ–¥–∞.",
          };
        } else {
          const days = Math.floor(Math.random() * (250 - 90 + 1)) + 90;
          resultData = {
            title: `–ü–û–¢–†–ï–ë–£–ï–¢–°–Ø –í–†–ï–ú–Ø... (–æ–∫–æ–ª–æ ${days} –¥–Ω–µ–π) ‚ùÑÔ∏è`,
            description:
              "–ö–∞–∂–µ—Ç—Å—è, —Ç–≤–æ—è –ª–∏—á–Ω–∞—è –∂–∏–∑–Ω—å –≤–ø–∞–ª–∞ –≤ —Å–ø—è—á–∫—É. –ù–æ —ç—Ç–æ –Ω–µ –ø—Ä–∏–≥–æ–≤–æ—Ä, –∞ –≤—ã–∑–æ–≤! –ü–æ—Ä–∞ —Å—Ç—Ä—è—Ö–Ω—É—Ç—å –ø—ã–ª—å, –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º '–æ—Ö–æ—Ç–Ω–∏–∫–∞' –∏ –≤—Å–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ —Ç—ã —á–µ—Ä—Ç–æ–≤—Å–∫–∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª–µ–Ω(–∞). –ù–∞—á–Ω–∏ —Å –º–∞–ª–æ–≥–æ: —Ñ–ª–∏—Ä—Ç —Å –±–∞—Ä–∏—Å—Ç–∞, –Ω–æ–≤—ã–π –ø–ª–µ–π–ª–∏—Å—Ç. –¢–≤–æ–π –∫–∞–º–±—ç–∫ –±—É–¥–µ—Ç —ç–ø–∏—á–Ω—ã–º!",
          };
        }

        titleEl.innerHTML = resultData.title;
        descriptionEl.textContent = resultData.description;

        setTimeout(() => {
          meterBar.style.transform = `scaleY(${scorePercentage / 100})`;
        }, 100);

        fireworksContainer.innerHTML = "";
        if (scorePercentage > 75) {
          launchFireworks(fireworksContainer, 5, 80); // More fireworks
        }
      }

      function launchFireworks(container, bursts = 3, particles = 50) {
        const colors = ["#ff5722", "#ff9800", "#ffc107", "#ffeb3b", "#ffffff"];
        for (let i = 0; i < bursts; i++) {
          setTimeout(() => {
            const x = Math.random() * 80 + 10;
            const y = Math.random() * 50 + 20;
            for (let j = 0; j < particles; j++) {
              const particle = document.createElement("div");
              particle.className = "particle";
              const angle = Math.random() * 360;
              const distance = Math.random() * 180 + 50; // Increased distance
              const endX = Math.cos((angle * Math.PI) / 180) * distance;
              const endY = Math.sin((angle * Math.PI) / 180) * distance;
              particle.style.setProperty(
                "--color",
                colors[Math.floor(Math.random() * colors.length)]
              );
              particle.style.left = `${x}%`;
              particle.style.top = `${y}%`;
              particle.style.setProperty(
                "--transform",
                `translate(${endX}px, ${endY}px) scale(0)`
              );
              container.appendChild(particle);
            }
          }, i * 400); // Slower bursts
        }
      }

      document.addEventListener("DOMContentLoaded", startTest);
    </script>
  </body>
</html>
